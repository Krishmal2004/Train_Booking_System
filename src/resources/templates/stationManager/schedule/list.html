<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Schedule Management</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #2c3e50;
            --secondary-color: #e74c3c;
            --accent-color: #3498db;
            --light-color: #ecf0f1;
            --dark-color: #2c3e50;
            --success-color: #2ecc71;
            --warning-color: #f39c12;
            --danger-color: #e74c3c;
            --border-radius: 10px;
            --box-shadow: 0 8px 30px rgba(0, 0, 0, 0.12);
        }
        body { font-family: 'Montserrat', sans-serif; background-color: #f5f7fa; margin: 0; padding-top: 80px; }
        .page-wrapper { max-width: 1400px; margin: 0 auto; padding: 20px; }
        .header { position: fixed; top: 0; left: 0; right: 0; background-color: var(--primary-color); padding: 15px 40px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); z-index: 1000; display: flex; justify-content: space-between; align-items: center; color: white; }
        .logo { font-size: 24px; font-weight: 700; text-decoration: none; color: white; }
        .page-header { display: flex; flex-wrap: wrap; justify-content: space-between; align-items: center; margin-bottom: 30px; gap: 15px; }
        .page-title { font-size: 32px; font-weight: 700; color: var(--dark-color); margin: 0; }
        .btn { display: inline-flex; align-items: center; gap: 8px; padding: 10px 20px; border-radius: 8px; text-decoration: none; font-weight: 500; border: none; cursor: pointer; transition: all 0.2s ease; }
        .btn:hover { transform: translateY(-2px); }
        .btn-secondary { background-color: var(--secondary-color); color: white; }
        .alert { padding: 15px; border-radius: 8px; margin-bottom: 20px; background-color: rgba(46, 204, 113, 0.15); color: #27ae60; border-left: 4px solid var(--success-color); }
        .card { background-color: white; border-radius: var(--border-radius); box-shadow: var(--box-shadow); margin-bottom: 30px; }
        .card-body { padding: 25px; }
        .filters { display: flex; flex-wrap: wrap; gap: 20px; align-items: flex-end; }
        .form-group { flex: 1 1 200px; }
        .form-group label { font-weight: 600; margin-bottom: 5px; display: block; }
        .form-control { width: 100%; padding: 10px; border-radius: 8px; border: 1px solid #ddd; box-sizing: border-box; }
        .table-container { overflow-x: auto; background: white; border-radius: var(--border-radius); box-shadow: var(--box-shadow); }
        table { width: 100%; border-collapse: collapse; }
        th, td { padding: 15px 20px; text-align: left; border-bottom: 1px solid #eee; white-space: nowrap; }
        thead th { background-color: var(--light-color); font-size: 13px; text-transform: uppercase; }
        tbody tr:hover { background-color: #f8f9fa; }
        .action-buttons { display: flex; gap: 8px; }
        .btn-icon { width: 36px; height: 36px; display: inline-flex; align-items: center; justify-content: center; border-radius: 8px; color: white; text-decoration: none; transition: all 0.2s ease; }
        .btn-icon:hover { transform: translateY(-2px); }
        .btn-view { background-color: var(--accent-color); }
        .btn-edit { background-color: var(--warning-color); }
        .btn-delete { background-color: var(--danger-color); }
        .empty-state { text-align: center; padding: 50px; }
        .status-badge { padding: 5px 12px; border-radius: 15px; color: white; font-size: 12px; font-weight: bold; text-transform: capitalize; }
        .status-active { background-color: var(--success-color); }
        .status-cancelled { background-color: var(--danger-color); }
        .status-completed { background-color: var(--primary-color); }
    </style>
</head>
<body>
<header class="header">
    <a href="/" class="logo">TrainConnect</a>
    <a href="/schedules/report" class="btn" style="background-color: var(--accent-color); color:white;">
        <i class="fas fa-chart-line"></i> Generate Report
    </a>
</header>
<header class="header">
    <a href="/" class="logo">TrainConnect</a>
    <div> <a href="/routes" class="btn" style="background-color: var(--success-color); color:white;">
        <i class="fas fa-route"></i> Manage Routes
    </a>
        <a href="/schedules/report" class="btn" style="background-color: var(--accent-color); color:white; margin-left: 10px;">
            <i class="fas fa-chart-line"></i> Generate Report
        </a>
    </div>
</header>
<div class="page-wrapper">
    <div class="page-header">
        <h1 class="page-title">Schedule Management</h1>
        <a href="/schedules/create" class="btn btn-secondary">
            <i class="fas fa-plus"></i> Create New Schedule
        </a>
    </div>

    <div th:if="${successMessage}" class="alert" th:text="${successMessage}"></div>

    <div class="card">
        <div class="card-body">
            <form th:action="@{/schedules}" method="get" class="filters">
                <div class="form-group">
                    <label for="date">Filter by Date</label>
                    <input type="date" id="date" name="date" class="form-control" th:value="${#temporals.format(today, 'yyyy-MM-dd')}">
                </div>
                <div class="form-group">
                    <label for="status">Filter by Status</label>
                    <select id="status" name="status" class="form-control">
                        <option value="">All Statuses</option>
                        <option value="active">Active</option>
                        <option value="cancelled">Cancelled</option>
                        <option value="completed">Completed</option>
                    </select>
                </div>
                <button type="submit" class="btn" style="background-color: var(--primary-color); color: white; height: 40px;">
                    <i class="fas fa-filter"></i> Filter
                </button>
            </form>
        </div>
    </div>

    <div class="table-container">
        <table>
            <thead>
            <tr>
                <th>Schedule ID</th>
                <th>Route</th>
                <th>Date</th>
                <th>Departure</th>
                <th>Arrival</th>
                <th>Status</th>
                <th>Actions</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="schedule : ${schedules}">
                <td th:text="${schedule.scheduleId}">S-001</td>

                <td th:text="${schedule.route != null ? schedule.route.origin + ' â†’ ' + schedule.route.destination : 'N/A'}">Route Name</td>

                <td th:text="${#temporals.format(schedule.scheduleDate, 'dd-MMM-yyyy')}">2025-10-03</td>
                <td th:text="${#temporals.format(schedule.departureTime, 'hh:mm a')}">08:00 AM</td>
                <td th:text="${#temporals.format(schedule.arrivalTime, 'hh:mm a')}">12:30 PM</td>
                <td>
                            <span class="status-badge"
                                  th:text="${schedule.status}"
                                  th:classappend="${schedule.status == 'active' ? 'status-active' : (schedule.status == 'cancelled' ? 'status-cancelled' : 'status-completed')}">
                                Active
                            </span>
                </td>
                <td>
                    <div class="action-buttons">
                        <a th:href="@{/schedules/{id}(id=${schedule.id})}" class="btn-icon btn-view" title="View"><i class="fas fa-eye"></i></a>
                        <a th:href="@{/schedules/{id}/edit(id=${schedule.id})}" class="btn-icon btn-edit" title="Edit"><i class="fas fa-edit"></i></a>
                        <form th:action="@{/schedules/{id}/delete(id=${schedule.id})}" method="post" style="display: inline;" onsubmit="return confirm('Are you sure you want to delete this schedule?');">
                            <button type="submit" class="btn-icon btn-delete" title="Delete" style="border:none; cursor:pointer;">
                                <i class="fas fa-trash"></i>
                            </button>
                        </form>
                    </div>
                </td>
            </tr>
            <tr th:if="${schedules == null or schedules.empty}">
                <td colspan="7" class="empty-state">
                    <h3>No schedules found for the selected criteria.</h3>
                </td>
            </tr>
            </tbody>
        </table>
    </div>
</div>
</body>
</html>